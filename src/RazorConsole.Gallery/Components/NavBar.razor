@inject NavigationManager Nav

<Select
    TItem="Tab"
    Options="_tabs"
    Formatter="@(t => t.Label)"
    Value="@_selectedTab"
    ValueChanged="@SelectTab"
    IsFocused="@IsFocused"
    IsFocusedChanged="@OnSelectFocusChanged"
    Expand="false"/>

@code {

    private class Tab
    {
        public Tab(string key, string label)
        {
            Key = key;
            Label = label;
        }
        public string Key { get; set; }
        public string Label { get; set; }
    }

    private Tab? _selectedTab;
    private readonly Tab[] _tabs =
    [
        new("align", "Align"),
        new("border", "Border"),
        new("columns", "Columns"),
        new("figlet", "Figlet"),
        new("grid", "Grid"),
        new("table", "Table"),
        new("html-inline", "HTML Inline"),
        new("html-list", "HTML List"),
        new("markup", "Markup"),
        new("markdown", "Markdown"),
        new("syntax", "Syntax Highlight"),
        new("newline", "Newline"),
        new("canvas", "Spectre Canvas"),
        new("small-charts", "Small Charts"),
        new("step-chart", "Step Chart"),
        new("padder", "Padder"),
        new("panel", "Panel"),
        new("rows", "Rows"),
        new("select", "Select"),
        new("spinner", "Spinner"),
        new("scrollable", "Scrollable"),
        new("textbutton", "Text Button"),
        new("textinput", "Text Input"),
        new("zindex", "Z-Index"),
        new("cli-info", "CLI Info")
    ];

    protected override void OnInitialized()
    {
        base.OnInitialized();
        _selectedTab = _tabs.FirstOrDefault();
    }

    private void SelectTab(Tab tab)
    {
        _selectedTab = tab;
        Nav.NavigateTo(tab.Key);
    }

    [Parameter]
    public bool IsFocused { get; set; }

    [Parameter]
    public EventCallback<bool> IsFocusedChanged { get; set; }

    private async Task OnSelectFocusChanged(bool isFocused)
    {
        if (IsFocused == isFocused)
        {
            return;
        }

        IsFocused = isFocused;

        if (IsFocusedChanged.HasDelegate)
        {
            await IsFocusedChanged.InvokeAsync(isFocused).ConfigureAwait(false);
        }

        await InvokeAsync(StateHasChanged).ConfigureAwait(false);
    }

}
